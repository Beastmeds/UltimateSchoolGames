<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate School Games ğŸŒŸ</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
  body { font-family:'Roboto',sans-serif; margin:0; padding:0; background:#f0f0f0; color:#000; text-align:center; transition: background 0.5s; }
  .menu, .settings, .game, #adminPanel { display:none; padding:20px; max-width:600px; margin:auto; }
  .visible { display:block; }
  button { padding:10px 20px; margin:5px; border:none; border-radius:12px; cursor:pointer; background:linear-gradient(45deg,#6a11cb,#2575fc); color:white; font-weight:bold; transition:0.3s; }
  button:hover { transform: scale(1.05); box-shadow:0 0 10px #2575fc; }
  input { padding:8px; margin:5px; border-radius:5px; border:1px solid #ccc; width:calc(100% - 20px); }
  #gameArea { width:100%; height:200px; margin:20px 0; position:relative; overflow:hidden; border-radius:12px; transition: background 0.5s; }
  #player { width:50px; position:absolute; bottom:0px; left:50px; transition: all 0.3s; }
  .bg-image { width:100%; height:150px; object-fit:cover; border-radius:10px; margin-bottom:10px; }
  h1 { background: linear-gradient(90deg,#6a11cb,#2575fc); -webkit-background-clip:text; color:transparent; }
  .powerup { position:absolute; width:30px; height:30px; background:gold; border-radius:50%; animation:spin 1s linear infinite; }
  @keyframes spin { from{transform:rotate(0deg);} to{transform:rotate(360deg);} }
</style>
</head>
<body>

<!-- MENU -->
<div class="menu visible" id="menu">
  <h1>Ultimate School Games ğŸŒŸ</h1>
  <button onclick="startClicker()">ğŸ« Clicker</button>
  <button onclick="startRunner()">ğŸƒ Runner</button>
  <button onclick="openSettings()">âš™ Einstellungen</button>
  <button id="adminBtn" onclick="showAdminPanel()" style="display:none;">ğŸ‘‘ Admin Dashboard</button>
</div>

<!-- CLICKER -->
<div class="game" id="clickerGame">
  <h2>School Clicker</h2>
  <p>Klicks: <span id="clickCount">0</span></p>
  <button onclick="clickerClick()">Klick mich!</button>
  <button onclick="backToMenu()">ğŸ”™ Menu</button>
</div>

<!-- RUNNER -->
<div class="game" id="runnerGame">
  <h2>School Runner</h2>
  <p>Level: <span id="runnerLevel">1</span> | XP: <span id="runnerXP">0</span></p>
  <div id="gameArea">
    <img src="" id="player">
  </div>
  <button onclick="jump()">Sprung</button>
  <button onclick="backToMenu()">ğŸ”™ Menu</button>
</div>

<!-- SETTINGS -->
<div class="settings" id="settingsMenu">
  <h2>âš™ Einstellungen</h2>
  <div>
    <h4>ğŸµ Musik LautstÃ¤rke</h4>
    <input type="range" id="musicVolume" min="0" max="1" step="0.01" value="0.5" onchange="setVolume(this.value)">
  </div>
  <div>
    <h4>ğŸ­ Skin auswÃ¤hlen</h4>
    <button onclick="changeSkin('schueler')">SchÃ¼ler</button>
    <button onclick="changeSkin('lehrer')">Lehrer</button>
    <button onclick="changeSkin('direktor')">Direktor</button>
    <button onclick="changeSkin('ninja')">Ninja</button>
  </div>
  <div>
    <h4>ğŸ–¼ Hintergrund</h4>
    <button onclick="changeBG('school')">Schule</button>
    <button onclick="changeBG('funny')">Meme</button>
    <button onclick="changeBG('gaming')">Gaming</button>
  </div>
  <div>
    <h4>ğŸ” Konto / Admin</h4>
    <input id="emailInput" type="email" placeholder="Email">
    <input id="passwordInput" type="password" placeholder="Passwort">
    <button onclick="loginUser()">Login</button>
    <button onclick="registerUser()">Registrieren</button>
    <button onclick="logoutUser()">Logout</button>
    <br><br>
    <input type="text" id="adminEmail" placeholder="Admin Email">
    <button onclick="checkAdmin(document.getElementById('adminEmail').value)">Admin Login</button>
  </div>
  <div>
    <h4>ğŸ’¾ Spielstand</h4>
    <button onclick="exportSave()">Export</button>
    <button onclick="importSave()">Import</button>
  </div>
  <button onclick="backToMenu()">ğŸ”™ Menu</button>
</div>

<!-- ADMIN -->
<div class="settings" id="adminPanel">
  <h2>ğŸ‘‘ Admin Dashboard</h2>
  <div>
    <h4>ğŸ­ Skins freischalten</h4>
    <button onclick="unlockSkin('schueler')">SchÃ¼ler</button>
    <button onclick="unlockSkin('lehrer')">Lehrer</button>
    <button onclick="unlockSkin('direktor')">Direktor</button>
    <button onclick="unlockSkin('ninja')">Ninja</button>
  </div>
  <div>
    <h4>ğŸ’¥ Extras</h4>
    <button onclick="addClicks(1000)">+1000 Klicks</button>
    <button onclick="resetAllGames()">SpielstÃ¤nde zurÃ¼cksetzen</button>
    <button onclick="spawnPowerup()">âœ¨ Spawn Power-Up</button>
  </div>
  <button onclick="backToMenu()">ğŸ”™ Menu</button>
</div>

<!-- MUSIK -->
<audio id="bgMusic" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" autoplay></audio>

<script>
/* -------------------------
       GLOBAL STATE
------------------------- */
let state = {
  count:0,
  multiplier:1,
  level:1,
  xp:0,
  skin:'schueler',
  bgPack:'school',
  loggedInUser:null,
  isAdmin:false
};

/* -------------------------
      MENU FUNCTIONS
------------------------- */
function startClicker(){ showGame('clickerGame'); updateDisplay(); }
function startRunner(){ showGame('runnerGame'); updateDisplay(); updateSkinImage(); updateBG(); }
function openSettings(){ showGame('settingsMenu'); }
function backToMenu(){ document.querySelectorAll('.game, .settings').forEach(g=>g.classList.remove('visible')); document.getElementById('menu').classList.add('visible'); }
function showGame(id){ document.querySelectorAll('.game, .settings').forEach(g=>g.classList.remove('visible')); document.getElementById(id).classList.add('visible'); }

/* -------------------------
      CLICKER FUNCTIONS
------------------------- */
function clickerClick(){ state.count+=state.multiplier; updateDisplay(); }

/* -------------------------
      RUNNER FUNCTIONS
------------------------- */
let isJumping=false;
function jump(){
  if(isJumping) return;
  isJumping=true;
  const player=document.getElementById('player');
  let pos=0;
  let up=setInterval(()=>{ if(pos>=100){ clearInterval(up); down(); } else { pos+=10; player.style.bottom=pos+'px'; } },50);
  function down(){ let downInt=setInterval(()=>{ if(pos<=0){ clearInterval(downInt); player.style.bottom='0px'; isJumping=false; } else { pos-=10; player.style.bottom=pos+'px'; } },50);}
}

/* -------------------------
      SETTINGS FUNCTIONS
------------------------- */
function setVolume(v){ document.getElementById('bgMusic').volume=v; }

const skins = {
  schueler:'https://i.imgur.com/2yaf2wb.jpeg',
  lehrer:'https://i.imgur.com/N0r9M0V.jpeg',
  direktor:'https://i.imgur.com/4g0e9nS.jpeg',
  ninja:'https://i.imgur.com/6R3kz7w.jpeg'
};
const backgrounds = {
  school:'#a0e0ff',
  funny:'#ffccff',
  gaming:'#d9ffcc'
};

function changeSkin(s){ state.skin=s; updateSkinImage(); alert('Skin geÃ¤ndert: '+s); }
function updateSkinImage(){ document.getElementById('player').src=skins[state.skin]; }
function changeBG(bg){ state.bgPack=bg; updateBG(); alert('Hintergrund geÃ¤ndert'); }
function updateBG(){ document.getElementById('gameArea').style.background=backgrounds[state.bgPack]; }

/* -------------------------
     EXPORT / IMPORT
------------------------- */
function exportSave(){ const blob=new Blob([JSON.stringify(state)],{type:'application/json'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='save.json'; a.click(); }
function importSave(){ const input=document.createElement('input'); input.type='file'; input.accept='.json'; input.onchange=e=>{ const file=e.target.files[0]; const reader=new FileReader(); reader.onload=e=>{ Object.assign(state,JSON.parse(e.target.result)); updateDisplay(); updateSkinImage(); updateBG(); alert('Spielstand geladen!'); }; reader.readAsText(file); }; input.click(); }

/* -------------------------
       UPDATE DISPLAY
------------------------- */
function updateDisplay(){ document.getElementById('clickCount').textContent=state.count; document.getElementById('runnerLevel').textContent=state.level; document.getElementById('runnerXP').textContent=state.xp; }

/* -------------------------
       ADMIN FEATURES
------------------------- */
function checkAdmin(email){
  if(email==='admin@example.com'){ state.isAdmin=true; document.getElementById('adminBtn').style.display='inline-block'; alert('ğŸ‘‘ Admin erkannt'); }
  else{ state.isAdmin=false; document.getElementById('adminBtn').style.display='none'; alert('âŒ Kein Admin'); }
}

function showAdminPanel(){ if(!state.isAdmin){ alert('âŒ Kein Admin'); return;} showGame('adminPanel'); }
function unlockSkin(skin){ changeSkin(skin); alert('Skin freigeschaltet: '+skin); }
function addClicks(amount){ state.count+=amount; updateDisplay(); alert('âœ… '+amount+' Klicks hinzugefÃ¼gt'); }
function resetAllGames(){ if(confirm('âš ï¸ Alle SpielstÃ¤nde zurÃ¼cksetzen?')){ localStorage.clear(); state.count=0; state.level=1; state.xp=0; state.multiplier=1; updateDisplay(); alert('âœ… ZurÃ¼ckgesetzt'); } }

/* -------------------------
      POWER-UP FUN
------------------------- */
function spawnPowerup(){
  const gameArea=document.getElementById('gameArea');
  const pu=document.createElement('div');
  pu.classList.add('powerup');
  pu.style.left=Math.random()*90+'%';
  pu.style.top=Math.random()*150+'px';
  gameArea.appendChild(pu);
  setTimeout(()=>{ gameArea.removeChild(pu); alert('âœ¨ Power-Up gesammelt! +50 Klicks'); state.count+=50; updateDisplay(); },2000);
}

/* -------------------------
      FAKE USER LOGIN (Demo)
------------------------- */
function loginUser(){
  const email=document.getElementById('emailInput').value;
  const password=document.getElementById('passwordInput').value;
  if(email && password){ state.loggedInUser=email; alert('âœ… Eingeloggt: '+email); checkAdmin(email); } 
  else alert('âŒ Bitte Email und Passwort eingeben'); 
}
function registerUser(){ alert('ğŸ“ Benutzer registriert! (Demo)'); }
function logoutUser(){ state.loggedInUser=null; alert('âœ… Ausgeloggt'); document.getElementById('adminBtn').style.display='none'; state.isAdmin=false; }

updateSkinImage();
updateBG();
updateDisplay();
</script>
</body>
</html>
